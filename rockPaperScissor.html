<script>
    /* misspelling rock paper or scissors will default to a tie 
       cancelling will also default to tie 
       spaces mess everything up*/
function game() {
    let countPWins = 0
    let countCWins = 0
    for (let i = 0; i < 5; i++) {
        const playerSelection = prompt("So, whatcha gonna play? Rock, Paper, or Scissors?")
        const computerSelection = computerPlay()
        let round = playRound(playerSelection, computerSelection)
        if (playerWins(playerSelection, computerSelection) == 0) {
            countPWins++
        }
        else if (playerWins(playerSelection, computerSelection) == 1) {
            countCWins++
        }
        else {
            i--
        }
    }
    declareWinner(countPWins, countCWins)
}


//outputs given game outcome
function playRound(playerSelection, computerSelection) {
    if (playerWins(playerSelection, computerSelection) == 0) {
        declareRoundWinnder(playerSelection, computerSelection, 0)
    }
    else if (playerWins(playerSelection, computerSelection) == 1){
        declareRoundWinnder(computerSelection, playerSelection, 1)
    }
    else {
        declareRoundWinnder(computerSelection, playerSelection, 2)
    }
}

//Returns 0 if player wins, 1 if computerselection wins, and 2 if it is a tie (2 is never returned)
function playerWins(playerSelection, computerSelection) {
    playerSelects = normalize(playerSelection)
    if (playerSelects == "Rock") {
        if (computerSelection == "Scissors") {
            return 0
        }
        else if (computerSelection == "Paper") {
            return 1
        }
        else {
            return 2
        }
    }
    else if (playerSelects == "Paper") {
        if (computerSelection == "Rock") {
            return 0
        }
        else if (computerSelection == "Scissors") {
            return 1
        }
        else {
            return 2
        }
    }
    else if (playerSelects == "Scissors") {
        if (computerSelection == "Paper") {
            return 0
        }
        else if (computerSelection == "Rock") {
            return 1
        }
        else {
            return 2
        }
    }
    else {
        return 2
    }
}

//converts given string to have the first char capitalized and rest undercase
function normalize(choice) {
    if (choice !== null) {
    return choice.charAt(0).toUpperCase() + choice.slice(1).toLowerCase()
    }
    else {
        return choice;
    }
}


//generates computer's move
function computerPlay() {    
    num = Math.floor(Math.random() * 3)
        if (num < 1) {
            return "Rock"
        }
        else if (num < 2) {
            return "Paper"
        }
        else {
            return "Scissors"
        }
    }

//declares winner, if scores are tied then user broke the game
function declareWinner(countPlayerWins, countComputerWins) {
    if (countPlayerWins > countComputerWins) {
        console.log("Congratulations! You've won!")
    }
    else if (countComputerWins > countPlayerWins) {
        console.log("You lost... Maybe this game isn't for you?")
    }
    else {
        console.log("You broke the game, congrats!")
    }
} 

//declares round winnder in console
function declareRoundWinnder(winner, loser, num) {
    if (num == 0) {
        console.log("You Won! " + normalize(winner) + " beats " + loser)
    }
    else if (num == 1) {
        console.log("You Lose! " + winner + " beats " + normalize(loser))
    }
    else {
        console.log("You Tied! " + winner + " is the same as " + normalize(loser))
    }


}



</script>